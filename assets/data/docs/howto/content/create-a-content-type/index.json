{"hash":"2440e9db50600cb08734e816ca8e01c87b0fe36a","data":{"markdownPage":{"id":"6040aa4f2457505d562a60f4c7973a2b","title":"Create a content type","description":"Create a content type","path":"/docs/howto/content/create-a-content-type/","timeToRead":1,"content":"<h1 id=\"create-a-content-type\"><a href=\"#create-a-content-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create a content type</h1>\n<p>To understand what are content types, <a href=\"/docs/architecture/content-types/\">read this page</a>.</p>\n<h2 id=\"define-your-needs\"><a href=\"#define-your-needs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Define your needs</h2>\n<p>The first thing to consider is: do you need a new Doctrine entity class?\nIt really depends if you need more fields that can't be covered by the JSON custom fields.</p>\n<p>As an example, we'll want to create a portfolio with photo galleries, but we also want our blog\nwith standard articles, unrelated to the galleries.</p>\n<p>In this case, our gallery can be a simple <code>[gallery]</code> shortcode placed inside the editor:\nno need to create an entity as we already have everything.</p>\n<p>So we need to create:</p>\n<ul>\n<li>A page named <code>Portfolio</code> which will be our paginated galleries archive</li>\n<li>A content type <code>photo_gallery</code></li>\n</ul>\n<h2 id=\"register-a-new-content-type\"><a href=\"#register-a-new-content-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Register a new content type</h2>\n<p>To register our new content type, create a new file <code>src/EventSubscriber/ContentTypeRegistrationEventSubscriber.php</code>:</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>EventSubscriber</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Post</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ContentTypeRegistrationEvent</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>Content<span class=\"token punctuation\">\\</span>ContentType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>EventDispatcher<span class=\"token punctuation\">\\</span>EventSubscriberInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContentTypeRegistrationEventSubscriber</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">EventSubscriberInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSubscribedEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token scope\">ContentTypeRegistrationEvent<span class=\"token punctuation\">::</span></span><span class=\"token keyword\">class</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'register'</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span>ContentTypeRegistrationEvent <span class=\"token variable\">$event</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$event</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addContentType</span><span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">ContentType</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">[</span>\n                    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'photo_gallery'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'entity_class_name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token scope\">Post<span class=\"token punctuation\">::</span></span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'permalink'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'/photo-gallery/{slug}'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'icon'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'mdi-folder-multiple-image'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"assign-capabilities-to-roles\"><a href=\"#assign-capabilities-to-roles\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Assign capabilities to roles</h2>\n<p>When you register a new content type, some capababilities are automatically generated.</p>\n<p>To be able to edit a page, you'll have to go to the administration panel under <code>Users > Roles</code> and\nassign them to your roles. In our example, they're the ones that end by <code>_photo_galleries</code>.</p>\n<h2 id=\"create-a-template\"><a href=\"#create-a-template\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create a template</h2>\n","sidebar":"docs","next":"/docs/howto/user-management/create-a-capability/","prev":"/docs/howto/theming/create-a-shortcode/","headings":[{"depth":1,"value":"Create a content type","anchor":"#create-a-content-type"},{"depth":2,"value":"Define your needs","anchor":"#define-your-needs"},{"depth":2,"value":"Register a new content type","anchor":"#register-a-new-content-type"},{"depth":2,"value":"Assign capabilities to roles","anchor":"#assign-capabilities-to-roles"},{"depth":2,"value":"Create a template","anchor":"#create-a-template"}]},"allMarkdownPage":{"edges":[{"node":{"path":"/docs/howto/user-management/create-a-capability/","title":"Create a capability"}},{"node":{"path":"/docs/howto/theming/create-a-shortcode/","title":"Create a shortcode"}},{"node":{"path":"/docs/howto/theming/create-a-component/","title":"Create a component"}},{"node":{"path":"/docs/howto/content/create-a-content-type/","title":"Create a content type"}},{"node":{"path":"/docs/architecture/user-management/","title":"User management"}},{"node":{"path":"/docs/architecture/theming/","title":"Theming"}},{"node":{"path":"/docs/architecture/symfony/","title":"Symfony 5.1+"}},{"node":{"path":"/docs/architecture/content-types/","title":"Content types"}},{"node":{"path":"/docs/screenshots/","title":"Screenshots"}},{"node":{"path":"/docs/installation/","title":"Installation"}},{"node":{"path":"/docs/","title":"Introduction"}},{"node":{"path":"/docs/first-steps/","title":"First steps"}},{"node":{"path":"/docs/docker/","title":"Docker services"}}]}},"context":{}}