{"hash":"24ad325f257e29f1e2a2b8f6fde8de473b3ad7fb","data":{"markdownPage":{"id":"6040aa4f2457505d562a60f4c7973a2b","title":"Create a content type","description":"Create a content type","path":"/docs/howto/content/create-a-content-type/","timeToRead":3,"content":"<h1 id=\"create-a-content-type\"><a href=\"#create-a-content-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create a content type</h1>\n<p>To understand what are content types, <a href=\"/docs/architecture/content-types/\">read this page</a>.</p>\n<h2 id=\"define-your-needs\"><a href=\"#define-your-needs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Define your needs</h2>\n<p>The first thing to consider is: do you need a new Doctrine entity class?\nIt really depends if you need more fields that can't be covered by the JSON custom fields.</p>\n<p>As an example, we'll want to create a portfolio with photo galleries, but we also want our blog\nwith standard articles, unrelated to the galleries.</p>\n<p>In this case, our gallery can be a simple <code>[gallery]</code> shortcode placed inside the editor:\nno need to create an entity as we already have everything.</p>\n<p>So we need to create:</p>\n<ul>\n<li>A page named <code>Portfolio</code> which will be our paginated galleries archive</li>\n<li>A content type <code>photo_gallery</code></li>\n</ul>\n<h2 id=\"register-a-new-content-type\"><a href=\"#register-a-new-content-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Register a new content type</h2>\n<p>To register our new content type, create a new file <code>src/EventSubscriber/ContentTypeRegistrationEventSubscriber.php</code>:</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>EventSubscriber</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Post</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ContentTypeRegistrationEvent</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">NumberNine<span class=\"token punctuation\">\\</span>Model<span class=\"token punctuation\">\\</span>Content<span class=\"token punctuation\">\\</span>ContentType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>EventDispatcher<span class=\"token punctuation\">\\</span>EventSubscriberInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ContentTypeRegistrationEventSubscriber</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">EventSubscriberInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSubscribedEvents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token scope\">ContentTypeRegistrationEvent<span class=\"token punctuation\">::</span></span><span class=\"token keyword\">class</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'register'</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span>ContentTypeRegistrationEvent <span class=\"token variable\">$event</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> void\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$event</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">addContentType</span><span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">ContentType</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">[</span>\n                    <span class=\"token single-quoted-string string\">'name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'photo_gallery'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'entity_class_name'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token scope\">Post<span class=\"token punctuation\">::</span></span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'permalink'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'/photo-gallery/{slug}'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token single-quoted-string string\">'icon'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'mdi-folder-multiple-image'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"assign-capabilities-to-roles\"><a href=\"#assign-capabilities-to-roles\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Assign capabilities to roles</h2>\n<p>When you register a new content type, some capababilities are automatically generated.</p>\n<p>To be able to edit a page, you'll have to go to the administration panel under <code>Users > Roles</code> and\nassign them to your roles. In our example, they're the ones that end by <code>_photo_galleries</code>.</p>\n<h2 id=\"create-the-template-for-a-single-entity\"><a href=\"#create-the-template-for-a-single-entity\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the template for a single entity</h2>\n<p>By default, the template used by our new content type is <code>content/single.html.twig</code>.</p>\n<p>Let's make a specific template. Create a file in <code>templates/theme/photo_gallery/single.html.twig</code>:</p>\n<pre class=\"language-twig\"><code class=\"language-twig\"><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">extends</span></span> <span class=\"token property\">N9_base_template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n\n<span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">block</span></span> <span class=\"token property\">body</span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n<span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container standard-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>page-main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-5xl font-thin mb-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></span><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">entity</span><span class=\"token punctuation\">.</span><span class=\"token property\">title</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span><span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>This photo gallery was created on</span> <span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">entity</span><span class=\"token punctuation\">.</span><span class=\"token property\">createdAt</span> <span class=\"token operator\">|</span> <span class=\"token property\">date</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span><span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span></span><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">entity</span><span class=\"token punctuation\">.</span><span class=\"token property\">content</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span><span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></span>\n<span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">endblock</span></span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span></code></pre>\n<p>Done! All photo galleries will now be displayed using this template.</p>\n<p>You can create even override this template for a particular gallery by creating:</p>\n<ul>\n<li><code>templates/theme/photo_gallery/single_your-gallery-slug.html.twig</code></li>\n<li><code>templates/theme/photo_gallery/single_125.html.twig</code> (change <code>125</code> with the ID)</li>\n</ul>\n<h2 id=\"create-the-template-of-the-index-page\"><a href=\"#create-the-template-of-the-index-page\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Create the template of the index page</h2>\n<p>Now we need an index page listing all our galleries, just like a blog feed.</p>\n<p>It will have a <code>page</code> content type but will a specific template.</p>\n<p>First, let's create the template. Our template will be a list of entities, so it have to be a <code>index.html.twig</code> file\nfor NumberNine to know it needs a paginated collection.</p>\n<p>Create a file <code>templates/theme/photo_gallery/index.html.twig</code>:</p>\n<pre class=\"language-twig\"><code class=\"language-twig\"><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">extends</span></span> <span class=\"token property\">N9_base_template</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n\n<span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">block</span></span> <span class=\"token property\">body</span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n<span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container standard-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>grid grid-cols-4 gap-5 w-full<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blog-main col-span-3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></span>\n            <span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">for</span></span> <span class=\"token property\">photo_gallery</span> <span class=\"token operator\">in</span> <span class=\"token property\">entities</span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n                <span class=\"token other\">&lt;a href=\"</span><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">N9_entity_url</span><span class=\"token punctuation\">(</span><span class=\"token property\">photo_gallery</span><span class=\"token punctuation\">)</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span><span class=\"token other\">\">\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-xl font-bold mb-5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></span><span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">photo_gallery</span><span class=\"token punctuation\">.</span><span class=\"token property\">title</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span><span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></span>\n            <span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">endfor</span></span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span>\n            <span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">N9_shortcode</span><span class=\"token punctuation\">(</span><span class=\"token string\"><span class=\"token punctuation\">'</span>[pagination]<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">)</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span>\n        <span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>aside</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blog-sidebar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></span>\n            <span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{{</span></span> <span class=\"token property\">N9_area</span><span class=\"token punctuation\">(</span><span class=\"token string\"><span class=\"token punctuation\">'</span>blog_sidebar<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">)</span> <span class=\"token rd\"><span class=\"token punctuation\">}}</span></span></span>\n        <span class=\"token other\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>aside</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></span>\n<span class=\"token tag\"><span class=\"token ld\"><span class=\"token punctuation\">{%</span> <span class=\"token keyword\">endblock</span></span> <span class=\"token rd\"><span class=\"token punctuation\">%}</span></span></span></code></pre>\n<p>You're almost done. In the administration panel, click <code>Pages > Add new</code> then go the the Classic Editor.</p>\n<p>On the right sidebar, choose from the template list \"Photo galleries index page\" that now appears as your\ntemplate exists. Set status to <code>Publish</code> and save the page.</p>\n<p><strong>Done!</strong> Visit your page to see the paginated list of galleries.</p>\n","sidebar":"docs","next":"/docs/howto/user-management/create-a-capability/","prev":"/docs/howto/theming/create-a-shortcode/","headings":[{"depth":1,"value":"Create a content type","anchor":"#create-a-content-type"},{"depth":2,"value":"Define your needs","anchor":"#define-your-needs"},{"depth":2,"value":"Register a new content type","anchor":"#register-a-new-content-type"},{"depth":2,"value":"Assign capabilities to roles","anchor":"#assign-capabilities-to-roles"},{"depth":2,"value":"Create the template for a single entity","anchor":"#create-the-template-for-a-single-entity"},{"depth":2,"value":"Create the template of the index page","anchor":"#create-the-template-of-the-index-page"}]},"allMarkdownPage":{"edges":[{"node":{"path":"/docs/howto/theming/create-a-shortcode/","title":"Create a shortcode"}},{"node":{"path":"/docs/howto/theming/create-a-component/","title":"Create a component"}},{"node":{"path":"/docs/howto/user-management/create-a-capability/","title":"Create a capability"}},{"node":{"path":"/docs/howto/content/create-a-content-type/","title":"Create a content type"}},{"node":{"path":"/docs/architecture/user-management/","title":"User management"}},{"node":{"path":"/docs/architecture/theming/","title":"Theming"}},{"node":{"path":"/docs/architecture/symfony/","title":"Symfony 5.1+"}},{"node":{"path":"/docs/architecture/content-types/","title":"Content types"}},{"node":{"path":"/docs/screenshots/","title":"Screenshots"}},{"node":{"path":"/docs/installation/","title":"Installation"}},{"node":{"path":"/docs/first-steps/","title":"First steps"}},{"node":{"path":"/docs/","title":"Introduction"}},{"node":{"path":"/docs/docker/","title":"Docker services"}}]}},"context":{}}